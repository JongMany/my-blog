---
title: TipTap 칩 변환 알고리즘
summary: "{{assistant}}/{{user}} 토큰을 칩 노드로 자동 변환, NodeView 렌더링, 복붙 호환 직렬화 규칙."
project: BubbleChat
order: 0.9
tags: [기능 개선]
date: 2024-11-20
cover: /projects/thumbnails/gifs/tiptap-chip.gif
coverAlt: "TipTap 칩 변환 데모"
coverCaption: "assistant, user를 칩 UI로 자동 변환하는 모습"
coverType: gif
coverAspectRatio: 16:9
---

## 개요

사용자가 {{assistant}}, {{user}} 등의 템플릿 변수를 입력할 때 일반 텍스트와 구분이 어려운 문제를 해결하기 위해 Tiptap 기반 특정 키워드 자동 칩 변환 시스템을 구현했습니다.

## 배경/문제

- 사용자가 {{assistant}}, {{user}} 등의 템플릿 변수를 입력할 때 일반 텍스트와 구분이 어려움
- 복사/붙여넣기 시 특수 형식 손실 및 포맷 일관성 문제

## 해결 방안

### 자동 인식 및 변환 시스템

{{ 트리거로 자동 suggestion 드롭다운 활성화 및 멘션 선택 시 칩 UI로 변환하는 시스템을 구현했습니다.

### 편리한 편집 기능

- 백스페이스 키로 칩 전체를 한 번에 삭제 가능
- 키보드 화살표로 칩 간 이동 및 선택
- 복사 붙여넣기 시에도 원본 형태 그대로 유지

### NodeView 렌더링 및 직렬화

- TipTap의 NodeView를 활용한 커스텀 칩 렌더링
- 복붙 호환 직렬화 규칙으로 포맷 일관성 보장

## 결과

- {{assistant}}, {{user}}를 각각 "캐릭터", "나" 칩 UI로 변환하여 시각화하여 프롬프트 가독성 향상
- 복사/붙여넣기 시에도 원본 포맷 보존
- 사용자 입력 경험 개선
